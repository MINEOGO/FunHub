local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local camera = workspace.CurrentCamera
local gui = Instance.new("ScreenGui", player.PlayerGui)
local frame = Instance.new("Frame", gui)
local titleLabel = Instance.new("TextLabel", frame)
local recordButton = Instance.new("TextButton", frame)
local replayButton = Instance.new("TextButton", frame)
local stopButton = Instance.new("TextButton", frame)
local loopButton = Instance.new("TextButton", frame)
local minimizeButton = Instance.new("TextButton", frame)
local actions = {}
local recording = false
local looping = false
local minimized = false

-- Set up the GUI frame
frame.Size = UDim2.new(0, 200, 0, 220)
frame.Position = UDim2.new(0.5, -100, 0.5, -110)
frame.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
frame.Active = true
frame.Draggable = true

-- Set up the title label
titleLabel.Size = UDim2.new(1, 0, 0.2, 0)
titleLabel.Text = "by mineogo"
titleLabel.BackgroundColor3 = Color3.new(0.5, 0.5, 0.5)
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.TextScaled = true

-- Set up the GUI buttons with increased size
recordButton.Size = UDim2.new(1, 0, 0, 0.7, 0)
recordButton.Position = UDim2.new(0, 0, 0.2, 0)
recordButton.Text = "Record"
recordButton.BackgroundColor3 = Color3.new(1, 0, 0)

replayButton.Size = UDim2.new(1, 0, 0.25, 0)
replayButton.Position = UDim2.new(0, 0, 0.45, 0)
replayButton.Text = "Replay"
replayButton.BackgroundColor3 = Color3.new(0, 1, 0)

loopButton.Size = UDim2.new(1, 0, 0.25, 0)
loopButton.Position = UDim2.new(0, 0, 0.7, 0)
loopButton.Text = "Loop"
loopButton.BackgroundColor3 = Color3.new(0, 0, 1)

stopButton.Size = UDim2.new(1, 0, 0.25, 0)
stopButton.Position = UDim2.new(0, 0, 0.95, 0)
stopButton.Text = "Stop"
stopButton.BackgroundColor3 = Color3.new(1, 1, 0)

minimizeButton.Size = UDim2.new(1, 0, 0.25, 0)
minimizeButton.Position = UDim2.new(0, 0, 0.15, 0)
minimizeButton.Text = "Minimize"
minimizeButton.BackgroundColor3 = Color3.new(0, 1, 1)

-- Function to record player actions
local function recordAction()
    recording = true
    actions = {}
    
    -- Record the position and orientation every 0.1 seconds
    while recording do
        table.insert(actions, {
            Position = humanoidRootPart.Position,
            Orientation = humanoidRootPart.Orientation
        })
        wait(0.1)
    end
end

-- Function to replay recorded actions
local function replayActions()
    if #actions > 0 then
        repeat
            -- Move to the starting position
            humanoidRootPart.CFrame = CFrame.new(actions[1].Position) * CFrame.Angles(0, math.rad(actions[1].Orientation.Y), 0)
            
            for _, action in ipairs(actions) do
                humanoidRootPart.CFrame = CFrame.new(action.Position) * CFrame.Angles(0, math.rad(action.Orientation.Y), 0)
                wait(0.1) -- Replay speed
            end
        until not looping
    end
end

-- Button events
recordButton.MouseButton1Click:Connect(function()
    if not recording then
        recordAction()
    end
end)

stopButton.MouseButton1Click:Connect(function()
    recording = false
    looping = false
end)

loopButton.MouseButton1Click:Connect(function()
    looping = not looping
    if looping then
        replayActions()
    end
end)

replayButton.MouseButton1Click:Connect(replayActions)

minimizeButton.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        frame.Size = UDim2.new(0, 200, 0, 50) -- Minimized size
        recordButton.Visible = false
        replayButton.Visible = false
        loopButton.Visible = false
        stopButton.Visible = false
        minimizeButton.Text = "Maximize"
    else
        frame.Size = UDim2.new(0, 200, 0, 220) -- Normal size
        recordButton.Visible = true
        replayButton.Visible = true
        loopButton.Visible = true
        stopButton.Visible = true
        minimizeButton.Text = "Minimize"
    end
end)

-- Prevent camera movement
game:GetService("UserInputService").InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        return Enum.UserInputType.None
    end
end)

-- Allow dragging the GUI by holding the title label
local dragStart, startPos
titleLabel.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragStart = input.Position
        startPos = frame.Position

        local function updateInput(input)
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end

        local function endDrag()
            game:GetService("UserInputService").InputChanged:Disconnect(updateInput)
            game:GetService("UserInputService").InputEnded:Disconnect(endDrag)
        end

        game:GetService("UserInputService").InputChanged:Connect(updateInput)
        game:GetService("UserInputService").InputEnded:Connect(endDrag)
    end
end)
